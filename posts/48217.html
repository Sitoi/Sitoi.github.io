<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>OpenLDAP 安装教程 | Sitoi</title><meta name="author" content="Sitoi"><meta name="copyright" content="Sitoi"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="OpenLDAP 安装教程在 centos7 上安装 OpenLDAP 环境准备两台虚拟机 node01 IP：192.168.1.143 server 端 node02 IP：192.168.1.146 client 端 均关闭 iptables 和 selinux 和 firewall Service 端步骤：  安装包 拷贝 DB_CONFIG 文件 设置目录权限 创建 LDAP 管理员密码">
<meta property="og:type" content="article">
<meta property="og:title" content="OpenLDAP 安装教程">
<meta property="og:url" content="https://sitoi.cn/posts/48217.html">
<meta property="og:site_name" content="Sitoi">
<meta property="og:description" content="OpenLDAP 安装教程在 centos7 上安装 OpenLDAP 环境准备两台虚拟机 node01 IP：192.168.1.143 server 端 node02 IP：192.168.1.146 client 端 均关闭 iptables 和 selinux 和 firewall Service 端步骤：  安装包 拷贝 DB_CONFIG 文件 设置目录权限 创建 LDAP 管理员密码">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://opendoodles.s3-us-west-1.amazonaws.com/ballet.svg">
<meta property="article:published_time" content="2018-09-23T04:00:00.000Z">
<meta property="article:modified_time" content="2025-11-12T05:28:30.733Z">
<meta property="article:author" content="Sitoi">
<meta property="article:tag" content="OpenLDAP">
<meta property="article:tag" content="安装文档">
<meta property="article:tag" content="权限验证">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://opendoodles.s3-us-west-1.amazonaws.com/ballet.svg"><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "OpenLDAP 安装教程",
  "url": "https://sitoi.cn/posts/48217.html",
  "image": "https://opendoodles.s3-us-west-1.amazonaws.com/ballet.svg",
  "datePublished": "2018-09-23T04:00:00.000Z",
  "dateModified": "2025-11-12T05:28:30.733Z",
  "author": [
    {
      "@type": "Person",
      "name": "Sitoi",
      "url": "https://sitoi.cn"
    }
  ]
}</script><link rel="shortcut icon" href="https://cdn.jsdelivr.net/gh/Sitoi/Sitoi.github.io/favicon.ico"><link rel="canonical" href="https://sitoi.cn/posts/48217.html"><link rel="preconnect" href="https://npm.elemecdn.com"/><link rel="preconnect" href="//www.google-analytics.com" crossorigin=""/><link rel="preconnect" href="//hm.baidu.com"/><link rel="preconnect" href="//static.cloudflareinsights.com"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="manifest" href="/manifest.json"/><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"/><link rel="icon" type="image/png" sizes="32x32" href="/medias/logo_32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/medias/logo_16.png"/><link rel="mask-icon" href="/apple-touch-icon.png" color="#5bbad5"/><link rel="stylesheet" href="/css/index.css?v=5.5.2"><link rel="stylesheet" href="https://npm.elemecdn.com/@fortawesome/fontawesome-free@latest/css/all.min.css"><link rel="stylesheet" href="https://npm.elemecdn.com/node-snackbar@latest/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/@fancyapps/ui@latest/dist/fancybox/fancybox.css" media="print" onload="this.media='all'"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!false && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', 'undefined')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', 'undefined')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          theme === 'dark' ? activateDarkMode() : theme === 'light' ? activateLightMode() : null
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?c29e2dcbe60cb0ec619a76c424a71b11";
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(hm, s);
})();
btf.addGlobalFn('pjaxComplete', () => {
  _hmt.push(['_trackPageview',window.location.pathname])
}, 'baidu_analytics')
</script><script async="async" src="https://www.googletagmanager.com/gtag/js?id=UA-136865061-1"></script><script>window.dataLayer = window.dataLayer || []
function gtag(){dataLayer.push(arguments)}
gtag('js', new Date())
gtag('config', 'UA-136865061-1')
btf.addGlobalFn('pjaxComplete', () => {
  gtag('config', 'UA-136865061-1', {'page_path': window.location.pathname})
}, 'google_analytics')
</script><script defer="defer" data-pjax="data-pjax" src="https://static.cloudflareinsights.com/beacon.min.js" data-cf-beacon="{&quot;token&quot;: &quot;b618d0d8bcf448af935bd89530ccffcd&quot;}"></script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"top_n_per_article":1,"unescape":false,"pagination":{"enable":false,"hitsPerPage":8},"languages":{"hits_empty":"未找到符合您查询的内容：${query}","hits_stats":"共找到 ${hits} 篇文章"}},
  translate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false,"highlightFullpage":false,"highlightMacStyle":true},
  copy: {
    success: '复制成功',
    error: '复制失败',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"已切换为繁体中文","cht_to_chs":"已切换为简体中文","day_to_night":"已切换为深色模式","night_to_day":"已切换为浅色模式","bgLight":"#49b1f5","bgDark":"#2d3035","position":"bottom-left"},
  infinitegrid: {
    js: 'https://npm.elemecdn.com/@egjs/infinitegrid@latest/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyloadPlugin: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: true,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'OpenLDAP 安装教程',
  isHighlightShrink: false,
  isToc: true,
  pageType: 'post'
}</script><script async src="https://umami.sitoi.cn/script.js" data-website-id="b23bdc64-5e23-46d5-9e2c-c862f9413a1f"></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Sitoi/Sitoi.github.io/background.css"><meta name="baidu_union_verify" content="8822ba856d99c65163dd207aaffc3510"><style type="text/css">.app-refresh{position:fixed;top:-2.2rem;left:0;right:0;z-index:99999;padding:0 1rem;font-size:15px;height:2.2rem;transition:all .3s ease}.app-refresh-wrap{display:flex;color:#fff;height:100%;align-items:center;justify-content:center}.app-refresh-wrap a{color:#fff;text-decoration:underline;cursor:pointer}</style><meta name="generator" content="Hexo 8.1.1"><link rel="alternate" href="/atom.xml" title="Sitoi" type="application/atom+xml">
</head><body><div id="web_bg" style="background-color: #efefef;"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src="https://cdn.jsdelivr.net/gh/Sitoi/Sitoi.github.io/medias/avatars/avatar.jpg" onerror="this.onerror=null;this.src='https://cdn.jsdelivr.net/gh/Sitoi/Sitoi.github.io/medias/loading/friend_404.gif'" alt="avatar"/></div><div class="site-data text-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">54</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">95</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">25</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div><div class="menus_item"><a class="site-page" href="/contact/"><i class="fa-fw fas fa-envelope"></i><span> 留言</span></a></div><div class="menus_item"><a class="site-page" href="/friends/"><i class="fa-fw fas fa-link"></i><span> 友人</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-list"></i><span> 项目</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="https://sitoi.github.io/dailycheckin/"><i class="fa-fw fas fa-location-arrow"></i><span> Dailycheckin</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="https://crawlaio.github.io"><i class="fa-fw fas fa-location-arrow"></i><span> 导航</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url(https://opendoodles.s3-us-west-1.amazonaws.com/ballet.svg);"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><span class="site-name">Sitoi</span></a><a class="nav-page-title" href="/"><span class="site-name">OpenLDAP 安装教程</span><span class="site-name"><i class="fa-solid fa-circle-arrow-left"></i><span>  返回首页</span></span></a></span><div id="menus"><div id="search-button"><span class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></span></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div><div class="menus_item"><a class="site-page" href="/contact/"><i class="fa-fw fas fa-envelope"></i><span> 留言</span></a></div><div class="menus_item"><a class="site-page" href="/friends/"><i class="fa-fw fas fa-link"></i><span> 友人</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-list"></i><span> 项目</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="https://sitoi.github.io/dailycheckin/"><i class="fa-fw fas fa-location-arrow"></i><span> Dailycheckin</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="https://crawlaio.github.io"><i class="fa-fw fas fa-location-arrow"></i><span> 导航</span></a></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">OpenLDAP 安装教程</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2018-09-23T04:00:00.000Z" title="发表于 2018-09-23 12:00:00">2018-09-23</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2025-11-12T05:28:30.733Z" title="更新于 2025-11-12 13:28:30">2025-11-12</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E6%9D%83%E9%99%90%E9%AA%8C%E8%AF%81/">权限验证</a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E6%9D%83%E9%99%90%E9%AA%8C%E8%AF%81/OpenLDAP/">OpenLDAP</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">总字数:</span><span class="word-count">797</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>4分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">浏览量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="container post-content" id="article-container"><h1 id="OpenLDAP-安装教程"><a href="#OpenLDAP-安装教程" class="headerlink" title="OpenLDAP 安装教程"></a>OpenLDAP 安装教程</h1><p>在 centos7 上安装 OpenLDAP</p>
<h2 id="环境准备"><a href="#环境准备" class="headerlink" title="环境准备"></a>环境准备</h2><p>两台虚拟机</p>
<p>node01 IP：192.168.1.143 server 端</p>
<p>node02 IP：192.168.1.146 client 端</p>
<p>均关闭 iptables 和 selinux 和 firewall</p>
<h2 id="Service-端"><a href="#Service-端" class="headerlink" title="Service 端"></a>Service 端</h2><p>步骤：</p>
<ol>
<li>安装包</li>
<li>拷贝 DB_CONFIG 文件</li>
<li>设置目录权限</li>
<li>创建 LDAP 管理员密码</li>
<li>修改配置文件(三个)</li>
<li>启动并设置开机启动 slapd 服务</li>
<li>导入基本 Schema</li>
<li>导入 base.ldif 文件</li>
<li>配置 migrationtools</li>
<li>导入系统用户和组</li>
<li>重启服务</li>
</ol>
<h3 id="安装包"><a href="#安装包" class="headerlink" title="安装包"></a>安装包</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install openldap-servers openldap-clients migrationtools</span><br></pre></td></tr></table></figure>

<h3 id="拷贝-DB-CONFIG-文件"><a href="#拷贝-DB-CONFIG-文件" class="headerlink" title="拷贝 DB_CONFIG 文件"></a>拷贝 DB_CONFIG 文件</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cp</span> /usr/share/openldap-servers/DB_CONFIG.example /var/lib/ldap/DB_CONFIG</span><br></pre></td></tr></table></figure>

<h3 id="设置目录权限"><a href="#设置目录权限" class="headerlink" title="设置目录权限"></a>设置目录权限</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">chown</span> -R ldap. /var/lib/ldap/</span><br></pre></td></tr></table></figure>

<h3 id="创建-LDAP-管理员密码"><a href="#创建-LDAP-管理员密码" class="headerlink" title="创建 LDAP 管理员密码"></a>创建 LDAP 管理员密码</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">slappasswd</span><br></pre></td></tr></table></figure>

<h4 id="输入两次后，保存密文"><a href="#输入两次后，保存密文" class="headerlink" title="输入两次后，保存密文"></a>输入两次后，保存密文</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">New password:</span><br><span class="line">Re-enter new password:</span><br><span class="line">&#123;SSHA&#125;AFU2R+sLzJgjUIoW1B5SxcTUdFcuncLz</span><br></pre></td></tr></table></figure>

<h3 id="修改配置文件-三个"><a href="#修改配置文件-三个" class="headerlink" title="修改配置文件(三个)"></a>修改配置文件(三个)</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/openldap/slapd.d/cn\=config/olcDatabase\=\&#123;0\&#125;config.ldif</span><br></pre></td></tr></table></figure>

<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"># AUTO-GENERATED FILE - DO NOT EDIT!! Use ldapmodify.</span><br><span class="line"># CRC32 d30fb98e</span><br><span class="line">dn: olcDatabase=&#123;<span class="number">0</span>&#125;config</span><br><span class="line">objectClass: olcDatabaseConfig</span><br><span class="line">olcDatabase: &#123;<span class="number">0</span>&#125;config</span><br><span class="line">olcAccess: &#123;<span class="number">0</span>&#125;<span class="keyword">to</span> * by dn.base=<span class="comment">&quot;gidNumber=0+uidNumber=0,cn=peercred,cn=extern</span></span><br><span class="line"> <span class="keyword">al</span>,<span class="keyword">cn</span>=auth<span class="comment">&quot; manage by * none</span></span><br><span class="line">structuralObjectClass: olcDatabaseConfig</span><br><span class="line">entryUUID: <span class="number">73</span>e7786c-<span class="number">50</span>fa-<span class="number">1038</span>-<span class="number">9</span>bfb-<span class="number">9</span>bfcf0927062</span><br><span class="line">creatorsName: <span class="keyword">cn</span>=config</span><br><span class="line">createTimestamp: <span class="number">20180920082518</span>Z</span><br><span class="line">entryCSN: <span class="number">20180920082518.739228</span>Z#<span class="number">000000</span>#<span class="number">000</span>#<span class="number">000000</span></span><br><span class="line">modifiersName: <span class="keyword">cn</span>=config</span><br><span class="line">modifyTimestamp: <span class="number">20180920082518</span>Z</span><br><span class="line">olcRootPW: &#123;SSHA&#125;<span class="number">37</span>kYCk8iLCmIrGnRvLc7XLAuPqftFUF/        # 添加该行（密码）</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/openldap/slapd.d/cn\=config/olcDatabase\=\&#123;2\&#125;hdb.ldif</span><br></pre></td></tr></table></figure>

<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"># AUTO-GENERATED FILE - DO NOT EDIT!! Use ldapmodify.</span><br><span class="line"># CRC32 d41d7411</span><br><span class="line">dn: olcDatabase=&#123;<span class="number">2</span>&#125;hdb</span><br><span class="line">objectClass: olcDatabaseConfig</span><br><span class="line">objectClass: olcHdbConfig</span><br><span class="line">olcDatabase: &#123;<span class="number">2</span>&#125;hdb</span><br><span class="line">olcDbDirectory: /var/lib/ldap</span><br><span class="line">olcSuffix: dc=sitoi,dc=<span class="keyword">cn</span>                                       # 更改dc</span><br><span class="line">olcRootDN: <span class="keyword">cn</span>=Manager,dc=sitoi,dc=<span class="keyword">cn</span>                            # 更改dc</span><br><span class="line">olcRootPW: &#123;SSHA&#125;<span class="number">37</span>kYCk8iLCmIrGnRvLc7XLAuPqftFUF/               # 添加该行（密码）</span><br><span class="line">olcDbIndex: objectClass eq,pres</span><br><span class="line">olcDbIndex: <span class="keyword">ou</span>,<span class="keyword">cn</span>,mail,surname,givenname eq,pres,sub</span><br><span class="line">structuralObjectClass: olcHdbConfig</span><br><span class="line">entryUUID: <span class="number">73</span>e77fe2-<span class="number">50</span>fa-<span class="number">1038</span>-<span class="number">9</span>bfd-<span class="number">9</span>bfcf0927062</span><br><span class="line">creatorsName: <span class="keyword">cn</span>=config</span><br><span class="line">createTimestamp: <span class="number">20180920082518</span>Z</span><br><span class="line">entryCSN: <span class="number">20180920082518.739419</span>Z#<span class="number">000000</span>#<span class="number">000</span>#<span class="number">000000</span></span><br><span class="line">modifiersName: <span class="keyword">cn</span>=config</span><br><span class="line">modifyTimestamp: <span class="number">20180920082518</span>Z</span><br><span class="line">olcAccess: &#123;<span class="number">0</span>&#125;<span class="keyword">to</span> attrs=userPassword by self <span class="keyword">write</span> by dn.base=<span class="string">&quot;cn=Manager,dc=sitoi,dc=cn&quot;</span> <span class="keyword">write</span> by anonymous auth by * none   # 添加该行</span><br><span class="line">olcAccess: &#123;<span class="number">1</span>&#125;<span class="keyword">to</span> * by dn.base=<span class="string">&quot;cn=Manager,dc=sitoi,dc=cn&quot;</span> <span class="keyword">write</span> by self <span class="keyword">write</span> by * <span class="keyword">read</span>                                      # 添加该行</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/openldap/slapd.d/cn\=config/olcDatabase\=\&#123;1\&#125;monitor.ldif</span><br></pre></td></tr></table></figure>

<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"># AUTO-GENERATED FILE - DO NOT EDIT!! Use ldapmodify.</span><br><span class="line"># CRC32 <span class="number">261</span>d1986</span><br><span class="line">dn: olcDatabase=&#123;<span class="number">1</span>&#125;monitor</span><br><span class="line">objectClass: olcDatabaseConfig</span><br><span class="line">olcDatabase: &#123;<span class="number">1</span>&#125;monitor</span><br><span class="line">olcAccess: &#123;<span class="number">0</span>&#125;<span class="keyword">to</span> * by dn.base=<span class="comment">&quot;gidNumber=0+uidNumber=0,cn=peercred,cn=extern</span></span><br><span class="line"> <span class="keyword">al</span>,<span class="keyword">cn</span>=auth<span class="string">&quot; read by dn.base=&quot;</span><span class="keyword">cn</span>=Manager,dc=sitoi,dc=<span class="keyword">cn</span><span class="comment">&quot; read by * none    # 修改dc信息</span></span><br><span class="line">structuralObjectClass: olcDatabaseConfig</span><br><span class="line">entryUUID: <span class="number">73</span>e77bbe-<span class="number">50</span>fa-<span class="number">1038</span>-<span class="number">9</span>bfc-<span class="number">9</span>bfcf0927062</span><br><span class="line">creatorsName: <span class="keyword">cn</span>=config</span><br><span class="line">createTimestamp: <span class="number">20180920082518</span>Z</span><br><span class="line">entryCSN: <span class="number">20180920082518.739313</span>Z#<span class="number">000000</span>#<span class="number">000</span>#<span class="number">000000</span></span><br><span class="line">modifiersName: <span class="keyword">cn</span>=config</span><br><span class="line">modifyTimestamp: <span class="number">20180920082518</span>Z</span><br></pre></td></tr></table></figure>

<h3 id="启动并设置开机启动-slapd-服务"><a href="#启动并设置开机启动-slapd-服务" class="headerlink" title="启动并设置开机启动 slapd 服务"></a>启动并设置开机启动 slapd 服务</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">systemctl <span class="built_in">enable</span> slapd.service</span><br><span class="line">systemctl start slapd.service</span><br></pre></td></tr></table></figure>

<h3 id="导入基本-Schema"><a href="#导入基本-Schema" class="headerlink" title="导入基本 Schema"></a>导入基本 Schema</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ldapadd -Y EXTERNAL -H ldapi:/// -f /etc/openldap/schema/cosine.ldif</span><br><span class="line">ldapadd -Y EXTERNAL -H ldapi:/// -f /etc/openldap/schema/nis.ldif</span><br><span class="line">ldapadd -Y EXTERNAL -H ldapi:/// -f /etc/openldap/schema/inetorgperson.ldif</span><br></pre></td></tr></table></figure>

<h3 id="导入-base-ldif-文件"><a href="#导入-base-ldif-文件" class="headerlink" title="导入 base.ldif 文件"></a>导入 base.ldif 文件</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim base.ldif</span><br></pre></td></tr></table></figure>

<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">dn: dc=sitoi,dc=<span class="keyword">cn</span></span><br><span class="line">objectClass: dcObject</span><br><span class="line">objectClass: organization</span><br><span class="line">dc: sitoi</span><br><span class="line"><span class="keyword">o</span> : sitoi</span><br><span class="line"></span><br><span class="line">dn: <span class="keyword">ou</span>=People,dc=sitoi,dc=<span class="keyword">cn</span></span><br><span class="line">objectClass: organizationalUnit</span><br><span class="line"><span class="keyword">ou</span>: People</span><br><span class="line"></span><br><span class="line">dn: <span class="keyword">ou</span>=Group,dc=sitoi,dc=<span class="keyword">cn</span></span><br><span class="line">objectClass: organizationalUnit</span><br><span class="line"><span class="keyword">ou</span>: Group</span><br></pre></td></tr></table></figure>

<h4 id="执行导入"><a href="#执行导入" class="headerlink" title="执行导入"></a>执行导入</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ldapadd -x -D cn=Manager,dc=sitoi,dc=cn -w sitoi  -f base.ldif</span><br></pre></td></tr></table></figure>

<h3 id="配置-migrationtools"><a href="#配置-migrationtools" class="headerlink" title="配置 migrationtools"></a>配置 migrationtools</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /usr/share/migrationtools/migrate_common.ph</span><br></pre></td></tr></table></figure>

<h4 id="更改以下配置"><a href="#更改以下配置" class="headerlink" title="更改以下配置"></a>更改以下配置</h4><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># Default DNS domain</span><br><span class="line">$DEFAULT_MAIL_DOMAIN = <span class="string">&quot;sitoi.cn&quot;</span>;</span><br><span class="line"></span><br><span class="line"># Default base</span><br><span class="line">$DEFAULT_BASE = <span class="string">&quot;dc=sitoi,dc=cn&quot;</span>;</span><br></pre></td></tr></table></figure>

<h3 id="导入系统用户和组"><a href="#导入系统用户和组" class="headerlink" title="导入系统用户和组"></a>导入系统用户和组</h3><h4 id="利用-pl-脚本将-etc-passwd-和-etc-shadow-生成-LDAP-能读懂的文件格式，保存在-tmp-下"><a href="#利用-pl-脚本将-etc-passwd-和-etc-shadow-生成-LDAP-能读懂的文件格式，保存在-tmp-下" class="headerlink" title="利用 pl 脚本将 &#x2F;etc&#x2F;passwd 和 &#x2F;etc&#x2F;shadow 生成 LDAP 能读懂的文件格式，保存在 &#x2F;tmp&#x2F; 下"></a>利用 pl 脚本将 &#x2F;etc&#x2F;passwd 和 &#x2F;etc&#x2F;shadow 生成 LDAP 能读懂的文件格式，保存在 &#x2F;tmp&#x2F; 下</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">/usr/share/migrationtools/migrate_base.pl &gt; /tmp/base.ldif</span><br><span class="line">/usr/share/migrationtools/migrate_passwd.pl /etc/passwd  &gt; /tmp/passwd.ldif</span><br><span class="line">/usr/share/migrationtools/migrate_group.pl /etc/group &gt; /tmp/group.ldif</span><br></pre></td></tr></table></figure>

<h4 id="导入-LDAP"><a href="#导入-LDAP" class="headerlink" title="导入 LDAP"></a>导入 LDAP</h4><blockquote>
<p>需要输入管理员密码</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ldapadd -x -D <span class="string">&quot;cn=Manager,dc=sitoi,dc=cn&quot;</span> -w sitoi -f /tmp/base.ldif</span><br><span class="line">ldapadd -x -D <span class="string">&quot;cn=Manager,dc=sitoi,dc=cn&quot;</span> -w sitoi -f /tmp/group.ldif</span><br><span class="line">ldapadd -x -D <span class="string">&quot;cn=Manager,dc=sitoi,dc=cn&quot;</span> -w sitoi -f /tmp/passwd.ldif</span><br></pre></td></tr></table></figure>

<h3 id="重启服务"><a href="#重启服务" class="headerlink" title="重启服务"></a>重启服务</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart slapd</span><br></pre></td></tr></table></figure>

<h2 id="Client-端"><a href="#Client-端" class="headerlink" title="Client 端"></a>Client 端</h2><h3 id="TODO"><a href="#TODO" class="headerlink" title="TODO"></a>TODO</h3></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="https://sitoi.cn">Sitoi</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="https://sitoi.cn/posts/48217.html">https://sitoi.cn/posts/48217.html</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来源 <a href="https://sitoi.cn" target="_blank">Sitoi</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E5%AE%89%E8%A3%85%E6%96%87%E6%A1%A3/">安装文档</a><a class="post-meta__tags" href="/tags/OpenLDAP/">OpenLDAP</a><a class="post-meta__tags" href="/tags/%E6%9D%83%E9%99%90%E9%AA%8C%E8%AF%81/">权限验证</a></div><div class="post-share"><div class="social-share" data-image="https://opendoodles.s3-us-west-1.amazonaws.com/ballet.svg" data-sites="wechat,qq,weibo,twitter,facebook,linkedin"></div><link rel="stylesheet" href="https://npm.elemecdn.com/butterfly-extsrc@latest/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://npm.elemecdn.com/butterfly-extsrc@latest/sharejs/dist/js/social-share.min.js" defer></script></div></div><div class="post-reward"><div class="reward-button"><i class="fas fa-qrcode"></i>赞助</div><div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="https://cdn.jsdelivr.net/gh/Sitoi/Sitoi.github.io/medias/reward/wechat.jpg" target="_blank"><img class="post-qr-code-img" src="https://cdn.jsdelivr.net/gh/Sitoi/Sitoi.github.io/medias/reward/wechat.jpg" alt="微信"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="https://cdn.jsdelivr.net/gh/Sitoi/Sitoi.github.io/medias/reward/alipay.jpg" target="_blank"><img class="post-qr-code-img" src="https://cdn.jsdelivr.net/gh/Sitoi/Sitoi.github.io/medias/reward/alipay.jpg" alt="支付宝"/></a><div class="post-qr-code-desc">支付宝</div></li></ul></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related" href="/posts/5308.html" title="OpenLDAP 常用命令"><img class="cover" src="https://opendoodles.s3-us-west-1.amazonaws.com/sitting-reading.svg" onerror="onerror=null;src='https://cdn.jsdelivr.net/gh/Sitoi/Sitoi.github.io/medias/loading/404.jpg'" alt="cover of previous post"><div class="info"><div class="info-1"><div class="info-item-1">上一篇</div><div class="info-item-2">OpenLDAP 常用命令</div></div><div class="info-2"><div class="info-item-1">OpenLDAP 常用命令ldapsearch ldapsearch - ldap 搜索工具  ldapsearch 实用程序可打开与 LDAP 服务器的连接，使用过滤器 filter 绑定并执行搜索。 如果 ldapsearch 找到一个或多个条目，则会检索由 attrs 指定的属性并且会将条目和值输出到标准输出。如果没有列出 attrs，则会返回所有属性。    选项 描述    -d debuglevel 设置 LDAP 调试级别。适用于 ldapdelete 的有用调试级别包括：1:跟踪 2:包 4:选项 32:过滤器 128:访问控制 要请求多个类别的调试信息，请将掩码相加。例如，要请求跟踪和过滤器信息，请将 debuglevel 指定为 33。   -x 进行简单认证   -D 用来绑定服务器的 DN   -w 绑定 DN 的密码   -b 指定要查询的根节点   -H 制定要查询的服务器   例子 查询所有用户1ldapsearch -x -b &quot;dc=sitoi,dc=cn&quot; -H ldap://192.168.1.143  指定条件的查询1l...</div></div></div></a><a class="pagination-related" href="/posts/15814.html" title="Markdown 代码规范 （GFM）"><img class="cover" src="https://opendoodles.s3-us-west-1.amazonaws.com/sitting.svg" onerror="onerror=null;src='https://cdn.jsdelivr.net/gh/Sitoi/Sitoi.github.io/medias/loading/404.jpg'" alt="cover of next post"><div class="info text-right"><div class="info-1"><div class="info-item-1">下一篇</div><div class="info-item-2">Markdown 代码规范 （GFM）</div></div><div class="info-2"><div class="info-item-1">GFM该文件用来测试和展示书写 README 的各种 markdown 语法。GitHub 的 markdown 语法在标准的 markdown 语法基础上做了扩充，称之为 GitHub Flavored Markdown。简称 GFM，GFM 在 GitHub 上有广泛应用，除了 README 文件外，issues 和 wiki 均支持 markdown 语法。 目录 横线  标题  文本  普通文本 单行文本 多行文本 文字高亮 换行 斜体 粗体 删除线   图片  来源于网络的图片  GitHub 仓库中的图片    链接  文字超链接  链接外部 URL  链接本仓库里的 URL    锚点  图片链接    列表  无序列表  有序列表  复选框列表    块引用  代码高亮  表格  表情   横线***、—、___可以显示横线效果    标题一级标题二级标题三级标题四级标题五级标题六级标题文本普通文本这是一段普通的文本 单行文本Hello,大家好，我是 Sitoi。  在一行开头加入 1 个 Tab 或者 4 个空格。 文本块语法 1在连续几行的文本开头加入 1 个...</div></div></div></a></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><a class="pagination-related" href="/posts/5308.html" title="OpenLDAP 常用命令"><img class="cover" src="https://opendoodles.s3-us-west-1.amazonaws.com/sitting-reading.svg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2018-09-24</div><div class="info-item-2">OpenLDAP 常用命令</div></div><div class="info-2"><div class="info-item-1">OpenLDAP 常用命令ldapsearch ldapsearch - ldap 搜索工具  ldapsearch 实用程序可打开与 LDAP 服务器的连接，使用过滤器 filter 绑定并执行搜索。 如果 ldapsearch 找到一个或多个条目，则会检索由 attrs 指定的属性并且会将条目和值输出到标准输出。如果没有列出 attrs，则会返回所有属性。    选项 描述    -d debuglevel 设置 LDAP 调试级别。适用于 ldapdelete 的有用调试级别包括：1:跟踪 2:包 4:选项 32:过滤器 128:访问控制 要请求多个类别的调试信息，请将掩码相加。例如，要请求跟踪和过滤器信息，请将 debuglevel 指定为 33。   -x 进行简单认证   -D 用来绑定服务器的 DN   -w 绑定 DN 的密码   -b 指定要查询的根节点   -H 制定要查询的服务器   例子 查询所有用户1ldapsearch -x -b &quot;dc=sitoi,dc=cn&quot; -H ldap://192.168.1.143  指定条件的查询1l...</div></div></div></a><a class="pagination-related" href="/posts/37161.html" title="Fedora 安装 MongoDB 教程"><img class="cover" src="https://opendoodles.s3-us-west-1.amazonaws.com/sitting-reading.svg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2020-06-09</div><div class="info-item-2">Fedora 安装 MongoDB 教程</div></div><div class="info-2"><div class="info-item-1">MongoDB 安装安装环境 Fedora 29  安装步骤 安装 mongodb 和 mongodb-server 启动服务  安装 MongoDB 和 MongoDB-Server1sudo dnf install mongodb mongodb-server  启动服务启动 mongod 服务 1sudo systemctl start mongod.service  设置开机自动启动 1sudo systemctl enable mongod.service </div></div></div></a><a class="pagination-related" href="/posts/64483.html" title="HDP 3.1.0 集成 Sqoop2"><img class="cover" src="https://opendoodles.s3-us-west-1.amazonaws.com/ice-cream.svg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2019-04-18</div><div class="info-item-2">HDP 3.1.0 集成 Sqoop2</div></div><div class="info-2"><div class="info-item-1">HDP 3.1.0 集成 Sqoop2环境 由三台主机组成的 HDP 3.1.0 集群 配置好时间同步  步骤 下载 Sqoop2 的安装包 解压安装包到 /usr/lib 目录下 修改 sqoop.sh 环境变量 修改 sqoop.properties 配置 导入第三方 jar 包 配置第三方 jar 包引用路径 修改 Ambari 上组件配置 验证配置是否正确 开启服务器  下载 Sqoop2 的安装包下载地址：http://mirror.bit.edu.cn/apache/sqoop/1.99.7/ 下载命令 12cd ~wget http://mirror.bit.edu.cn/apache/sqoop/1.99.7/sqoop-1.99.7-bin-hadoop200.tar.gz  解压安装包到 /usr/lib 目录下解压 Sqoop2 压缩包 1tar -xvf sqoop-&lt;version&gt;-bin-hadoop&lt;hadoop-version&gt;.tar.gz  移动到 /usr/lib/sqoop 目录 1mv sqoop-&lt;ver...</div></div></div></a><a class="pagination-related" href="/posts/53731.html" title="Fedora 安装 GitBook 教程"><img class="cover" src="https://opendoodles.s3-us-west-1.amazonaws.com/float.svg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2019-04-09</div><div class="info-item-2">Fedora 安装 GitBook 教程</div></div><div class="info-2"><div class="info-item-1">Fedora 安装 GitBook 教程安装 nvm安装 nvm 1curl -o- https://raw.githubusercontent.com/creationix/nvm/v0.33.11/install.sh | bash  退出终端 1exit  安装 node1nvm install node  安装 GitBook 更换 npm 源  1npm config set registry https://registry.npm.taobao.org  1npm install -g gitbook-cli  安装 GitBook 依赖安装 svgexport 1npm install -g svgexport --unsafe-perm  安装 calibre 1sudo dnf install calibre </div></div></div></a><a class="pagination-related" href="/posts/24540.html" title="Hadoop 单机安装教程"><img class="cover" src="https://opendoodles.s3-us-west-1.amazonaws.com/unboxing.svg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2019-01-07</div><div class="info-item-2">Hadoop 单机安装教程</div></div><div class="info-2"><div class="info-item-1">Hadoop 单机安装步骤安装环境 Fedora 29 openjdk version “1.8.0_191”  安装步骤 创建 Hadoop 帐号 下载 Hadoop 安装包 解压 Hadoop 安装包 配置环境变量 配置 Hadoop 文件 启动集群 查看状态  创建 Hadoop 帐号为 Hadoop 创建一个专门的账号12sudo adduser hadoopsudo passwd hadoop  授予 Hadoop root 权限 为了测试，图方便，这里给 Hadoop root 权限，生产环境不建议这样做。  使用 root 权限编辑&#x2F;etc&#x2F;sudoers: 1sudo vim /etc/sudoers  末尾添加一行： 1hadoop  ALL=(ALL) ALL  切换到 Hadoop 账号： 1su hadoop  配置 SSH 无密码登录首先生成公私密钥对 1ssh-keygen -t rsa   指定 key pair 的存放位置回车默认存放于&#x2F;home&#x2F;hadoop&#x2F;.ssh&#x2F;id_rsa 输入...</div></div></div></a><a class="pagination-related" href="/posts/16143.html" title="Livy 安装教程"><img class="cover" src="https://opendoodles.s3-us-west-1.amazonaws.com/sitting.svg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2019-01-06</div><div class="info-item-2">Livy 安装教程</div></div><div class="info-2"><div class="info-item-1">Livy 安装安装环境 Fedora 29 Spark PySpark  安装步骤 下载 Livy 安装包 解压 Livy 安装包到 /opt/livy/ 目录 修改配置 启动 Livy  下载 Livy 安装包下载地址：http://livy.incubator.apache.org/get-started/ 解压 Livy 安装包到 &#x2F;opt&#x2F;livy&#x2F; 目录创建 &#x2F;opt&#x2F;livy 目录1sudo mkdir -p /opt/livy  解压到 &#x2F;opt&#x2F;livy 目录12sudo unzip livy-0.5.0-incubating-bin.zip  -d /opt/sudo mv /opt/livy-0.5.0-incubating-bin /opt/livy  修改配置将配置模板 livy.conf.template 复制并命名成 livy.conf1sudo cp /opt/livy/conf/livy.conf.template /opt/livy/conf/livy.conf  更改配置文件...</div></div></div></a></div></div><hr class="custom-hr"/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div id="waline-wrap"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="https://cdn.jsdelivr.net/gh/Sitoi/Sitoi.github.io/medias/avatars/avatar.jpg" onerror="this.onerror=null;this.src='https://cdn.jsdelivr.net/gh/Sitoi/Sitoi.github.io/medias/loading/friend_404.gif'" alt="avatar"/></div><div class="author-info-name">Sitoi</div><div class="author-info-description">真正的酷都是需要付诸努力的</div><div class="site-data"><a href="/archives/"><div class="headline">文章</div><div class="length-num">54</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">95</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">25</div></a></div><a id="card-info-btn" href="https://github.com/Sitoi"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons"><a class="social-icon" href="/wechat.jpg" target="_blank" title="Wechat"><i class="fab fa-weixin"></i></a><a class="social-icon" href="tencent://message/?uin=133397418" target="_blank" title="QQ"><i class="fab fa-qq"></i></a><a class="social-icon" href="https://mail.qq.com/cgi-bin/qm_share?t=qm_mailme&amp;email=133397418" target="_blank" title="Email"><i class="fas fa-envelope"></i></a><a class="social-icon" href="https://github.com/Sitoi/" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="/atom.xml" target="_blank" title="RSS"><i class="fas fa-rss"></i></a></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#OpenLDAP-%E5%AE%89%E8%A3%85%E6%95%99%E7%A8%8B"><span class="toc-number">1.</span> <span class="toc-text">OpenLDAP 安装教程</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%8E%AF%E5%A2%83%E5%87%86%E5%A4%87"><span class="toc-number">1.1.</span> <span class="toc-text">环境准备</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Service-%E7%AB%AF"><span class="toc-number">1.2.</span> <span class="toc-text">Service 端</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%89%E8%A3%85%E5%8C%85"><span class="toc-number">1.2.1.</span> <span class="toc-text">安装包</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8B%B7%E8%B4%9D-DB-CONFIG-%E6%96%87%E4%BB%B6"><span class="toc-number">1.2.2.</span> <span class="toc-text">拷贝 DB_CONFIG 文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%BE%E7%BD%AE%E7%9B%AE%E5%BD%95%E6%9D%83%E9%99%90"><span class="toc-number">1.2.3.</span> <span class="toc-text">设置目录权限</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA-LDAP-%E7%AE%A1%E7%90%86%E5%91%98%E5%AF%86%E7%A0%81"><span class="toc-number">1.2.4.</span> <span class="toc-text">创建 LDAP 管理员密码</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%BE%93%E5%85%A5%E4%B8%A4%E6%AC%A1%E5%90%8E%EF%BC%8C%E4%BF%9D%E5%AD%98%E5%AF%86%E6%96%87"><span class="toc-number">1.2.4.1.</span> <span class="toc-text">输入两次后，保存密文</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6-%E4%B8%89%E4%B8%AA"><span class="toc-number">1.2.5.</span> <span class="toc-text">修改配置文件(三个)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%90%AF%E5%8A%A8%E5%B9%B6%E8%AE%BE%E7%BD%AE%E5%BC%80%E6%9C%BA%E5%90%AF%E5%8A%A8-slapd-%E6%9C%8D%E5%8A%A1"><span class="toc-number">1.2.6.</span> <span class="toc-text">启动并设置开机启动 slapd 服务</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AF%BC%E5%85%A5%E5%9F%BA%E6%9C%AC-Schema"><span class="toc-number">1.2.7.</span> <span class="toc-text">导入基本 Schema</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AF%BC%E5%85%A5-base-ldif-%E6%96%87%E4%BB%B6"><span class="toc-number">1.2.8.</span> <span class="toc-text">导入 base.ldif 文件</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%89%A7%E8%A1%8C%E5%AF%BC%E5%85%A5"><span class="toc-number">1.2.8.1.</span> <span class="toc-text">执行导入</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE-migrationtools"><span class="toc-number">1.2.9.</span> <span class="toc-text">配置 migrationtools</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9B%B4%E6%94%B9%E4%BB%A5%E4%B8%8B%E9%85%8D%E7%BD%AE"><span class="toc-number">1.2.9.1.</span> <span class="toc-text">更改以下配置</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AF%BC%E5%85%A5%E7%B3%BB%E7%BB%9F%E7%94%A8%E6%88%B7%E5%92%8C%E7%BB%84"><span class="toc-number">1.2.10.</span> <span class="toc-text">导入系统用户和组</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%A9%E7%94%A8-pl-%E8%84%9A%E6%9C%AC%E5%B0%86-etc-passwd-%E5%92%8C-etc-shadow-%E7%94%9F%E6%88%90-LDAP-%E8%83%BD%E8%AF%BB%E6%87%82%E7%9A%84%E6%96%87%E4%BB%B6%E6%A0%BC%E5%BC%8F%EF%BC%8C%E4%BF%9D%E5%AD%98%E5%9C%A8-tmp-%E4%B8%8B"><span class="toc-number">1.2.10.1.</span> <span class="toc-text">利用 pl 脚本将 &#x2F;etc&#x2F;passwd 和 &#x2F;etc&#x2F;shadow 生成 LDAP 能读懂的文件格式，保存在 &#x2F;tmp&#x2F; 下</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AF%BC%E5%85%A5-LDAP"><span class="toc-number">1.2.10.2.</span> <span class="toc-text">导入 LDAP</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%87%8D%E5%90%AF%E6%9C%8D%E5%8A%A1"><span class="toc-number">1.2.11.</span> <span class="toc-text">重启服务</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Client-%E7%AB%AF"><span class="toc-number">1.3.</span> <span class="toc-text">Client 端</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#TODO"><span class="toc-number">1.3.1.</span> <span class="toc-text">TODO</span></a></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/posts/39218.html" title="如何在 Elasticsearch 中更新索引的 Mapping"><img src="https://opendoodles.s3-us-west-1.amazonaws.com/float.svg" onerror="this.onerror=null;this.src='https://cdn.jsdelivr.net/gh/Sitoi/Sitoi.github.io/medias/loading/404.jpg'" alt="如何在 Elasticsearch 中更新索引的 Mapping"/></a><div class="content"><a class="title" href="/posts/39218.html" title="如何在 Elasticsearch 中更新索引的 Mapping">如何在 Elasticsearch 中更新索引的 Mapping</a><time datetime="2023-10-14T06:26:21.000Z" title="发表于 2023-10-14 14:26:21">2023-10-14</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/10054.html" title="简洁登录：在 Linux 终端中去除 'Last login' 信息"><img src="https://opendoodles.s3-us-west-1.amazonaws.com/sitting.svg" onerror="this.onerror=null;this.src='https://cdn.jsdelivr.net/gh/Sitoi/Sitoi.github.io/medias/loading/404.jpg'" alt="简洁登录：在 Linux 终端中去除 'Last login' 信息"/></a><div class="content"><a class="title" href="/posts/10054.html" title="简洁登录：在 Linux 终端中去除 'Last login' 信息">简洁登录：在 Linux 终端中去除 'Last login' 信息</a><time datetime="2023-07-28T02:25:20.000Z" title="发表于 2023-07-28 10:25:20">2023-07-28</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/46937.html" title="高效下载 NGINX 静态网站：利用 wget 进行递归下载"><img src="https://opendoodles.s3-us-west-1.amazonaws.com/selfie.svg" onerror="this.onerror=null;this.src='https://cdn.jsdelivr.net/gh/Sitoi/Sitoi.github.io/medias/loading/404.jpg'" alt="高效下载 NGINX 静态网站：利用 wget 进行递归下载"/></a><div class="content"><a class="title" href="/posts/46937.html" title="高效下载 NGINX 静态网站：利用 wget 进行递归下载">高效下载 NGINX 静态网站：利用 wget 进行递归下载</a><time datetime="2023-07-16T01:59:04.000Z" title="发表于 2023-07-16 09:59:04">2023-07-16</time></div></div></div></div></div></div></main><footer id="footer" style="background-image: url(https://opendoodles.s3-us-west-1.amazonaws.com/ballet.svg);"><div class="footer-flex"><div class="footer-flex-items"><div class="footer-flex-item"><div class="footer-flex-title">项目</div><div class="footer-flex-content"><a href="https://sitoi.github.io/dailycheckin/" target="_blank" title="✏️ Dailycheckin">✏️ Dailycheckin</a><a href="https://crawlaio.com/" target="_blank" title="🕷️ Crawlaio">🕷️ Crawlaio</a></div></div></div><div class="footer-flex-items"><div class="footer-flex-item"><div class="footer-flex-title">备用</div><div class="footer-flex-content"><a href="https://sitoi.github.io" target="_blank" title="📑 GitHub Pages">📑 GitHub Pages</a><a href="https://www.cnblogs.com/sitoi" target="_blank" title="📑 Cnblog">📑 Cnblog</a></div></div></div><div class="footer-flex-items"><div class="footer-flex-item"><div class="footer-flex-title">框架</div><div class="footer-flex-content"><a href="https://hexo.io/zh-cn/" target="_blank" title="📦 Hexo">📦 Hexo</a><a href="https://butterfly.js.org/" target="_blank" title="🎨 Butterfly">🎨 Butterfly</a></div></div></div><div class="footer-flex-items"><div class="footer-flex-item"><div class="footer-flex-title">赞助</div><div class="footer-flex-content"><div><img src='https://cdn.jsdelivr.net/gh/Sitoi/Sitoi.github.io/medias/reward/alipay.jpg' alt='Sitoi' width='100px' height='100px'></div></div></div></div></div><div class="footer-other"><div class="footer-copyright"><span class="copyright">&copy;&nbsp;2018 - 2025 By Sitoi</span><span class="framework-info"><span class="footer-separator">|</span><span>框架 </span><a href="https://hexo.io">Hexo 8.1.1</a><span class="footer-separator">|</span><span>主题 </span><a href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly 5.5.2</a></span></div><div class="footer_custom_text"><a href="https://beian.miit.gov.cn/"><img class="icp-icon" src="/medias/icp.png"><span>沪ICP备2025115209号</span></a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="日间和夜间模式切换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="前往评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js?v=5.5.2"></script><script src="/js/main.js?v=5.5.2"></script><script src="https://npm.elemecdn.com/@fancyapps/ui@latest/dist/fancybox/fancybox.umd.js"></script><script src="https://npm.elemecdn.com/instant.page@latest/instantpage.js" type="module"></script><script src="https://npm.elemecdn.com/node-snackbar@latest/dist/snackbar.min.js"></script><div class="js-pjax"><script>(() => {
  const runMermaid = ele => {
    window.loadMermaid = true
    const theme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark' : 'default'

    ele.forEach((item, index) => {
      const mermaidSrc = item.firstElementChild
      const config = mermaidSrc.dataset.config ? JSON.parse(mermaidSrc.dataset.config) : {}
      if (!config.theme) {
        config.theme = theme
      }
      const mermaidThemeConfig = `%%{init: ${JSON.stringify(config)}}%%\n`
      const mermaidID = `mermaid-${index}`
      const mermaidDefinition = mermaidThemeConfig + mermaidSrc.textContent

      const renderFn = mermaid.render(mermaidID, mermaidDefinition)
      const renderMermaid = svg => {
        mermaidSrc.insertAdjacentHTML('afterend', svg)
      }

      // mermaid v9 and v10 compatibility
      typeof renderFn === 'string' ? renderMermaid(renderFn) : renderFn.then(({ svg }) => renderMermaid(svg))
    })
  }

  const codeToMermaid = () => {
    const codeMermaidEle = document.querySelectorAll('pre > code.mermaid')
    if (codeMermaidEle.length === 0) return

    codeMermaidEle.forEach(ele => {
      const preEle = document.createElement('pre')
      preEle.className = 'mermaid-src'
      preEle.hidden = true
      preEle.textContent = ele.textContent
      const newEle = document.createElement('div')
      newEle.className = 'mermaid-wrap'
      newEle.appendChild(preEle)
      ele.parentNode.replaceWith(newEle)
    })
  }

  const loadMermaid = () => {
    if (false) codeToMermaid()
    const $mermaid = document.querySelectorAll('#article-container .mermaid-wrap')
    if ($mermaid.length === 0) return

    const runMermaidFn = () => runMermaid($mermaid)
    btf.addGlobalFn('themeChange', runMermaidFn, 'mermaid')
    window.loadMermaid ? runMermaidFn() : btf.getScript('https://npm.elemecdn.com/mermaid@latest/dist/mermaid.min.js').then(runMermaidFn)
  }

  btf.addGlobalFn('encrypt', loadMermaid, 'mermaid')
  window.pjax ? loadMermaid() : document.addEventListener('DOMContentLoaded', loadMermaid)
})()</script><script>(() => {
  let initFn = window.walineFn || null
  const isShuoshuo = GLOBAL_CONFIG_SITE.pageType === 'shuoshuo'
  const option = null

  const destroyWaline = ele => ele.destroy()

  const initWaline = (Fn, el = document, path = window.location.pathname) => {
    const waline = Fn({
      el: el.querySelector('#waline-wrap'),
      serverURL: 'https://waline.sitoi.cn/',
      pageview: false,
      dark: 'html[data-theme="dark"]',
      comment: false,
      ...option,
      path: isShuoshuo ? path : (option && option.path) || path
    })

    if (isShuoshuo) {
      window.shuoshuoComment.destroyWaline = () => {
        destroyWaline(waline)
        if (el.children.length) {
          el.innerHTML = ''
          el.classList.add('no-comment')
        }
      }
    }
  }

  const loadWaline = (el, path) => {
    if (initFn) initWaline(initFn, el, path)
    else {
      btf.getCSS('https://npm.elemecdn.com/@waline/client@latest/dist/waline.css')
        .then(() => import('https://npm.elemecdn.com/@waline/client@latest/dist/waline.js'))
        .then(({ init }) => {
          initFn = init || Waline.init
          initWaline(initFn, el, path)
          window.walineFn = initFn
        })
    }
  }

  if (isShuoshuo) {
    'Waline' === 'Waline'
      ? window.shuoshuoComment = { loadComment: loadWaline } 
      : window.loadOtherComment = loadWaline
    return
  }

  if ('Waline' === 'Waline' || !false) {
    if (false) btf.loadComment(document.getElementById('waline-wrap'),loadWaline)
    else setTimeout(loadWaline, 0)
  } else {
    window.loadOtherComment = loadWaline
  }
})()</script></div><div class="app-refresh" id="app-refresh"> <div class="app-refresh-wrap"> <label>✨ 网站已更新最新版本 👉</label> <a href="javascript:void(0)" onclick="location.reload()">点击刷新</a> </div></div><script>function showNotification(){if(GLOBAL_CONFIG.Snackbar){var t="light"===document.documentElement.getAttribute("data-theme")?GLOBAL_CONFIG.Snackbar.bgLight:GLOBAL_CONFIG.Snackbar.bgDark,e=GLOBAL_CONFIG.Snackbar.position;Snackbar.show({text:"已更新最新版本",backgroundColor:t,duration:5e5,pos:e,actionText:"点击刷新",actionTextColor:"#fff",onActionClick:function(t){location.reload()}})}else{var o=`top: 0; background: ${"light"===document.documentElement.getAttribute("data-theme")?"#49b1f5":"#1f1f1f"};`;document.getElementById("app-refresh").style.cssText=o}}"serviceWorker"in navigator&&(navigator.serviceWorker.controller&&navigator.serviceWorker.addEventListener("controllerchange",function(){showNotification()}),window.addEventListener("load",function(){navigator.serviceWorker.register("/sw.js")}));</script><script id="click-heart" src="https://npm.elemecdn.com/butterfly-extsrc@latest/dist/click-heart.min.js" async="async" mobile="false"></script><script async data-pjax src="/"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><i class="fas fa-spinner fa-pulse" id="loading-status" hidden="hidden"></i><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="text-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据加载中</span></div><div class="local-search-input"><input placeholder="搜索文章" type="text"/></div><hr/><div id="local-search-results"></div><div class="ais-Pagination" id="local-search-pagination" style="display:none;"><ul class="ais-Pagination-list"></ul></div><div id="local-search-stats"></div></div><div id="search-mask"></div><script src="/js/search/local-search.js?v=5.5.2"></script></div></div></body></html>