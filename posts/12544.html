<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>HDFS 配额教程 | Sitoi</title><meta name="author" content="Sitoi"><meta name="copyright" content="Sitoi"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="名称配额（Name Quota）名称配额是在对应的目录下所有文件和目录名称的数量上的限制。当超过这个配额的时候，文件或目录就会创建失败，重命名后名称配额仍然有效。 名称配额步骤 创建一个测试目录 设置创建的目录的名称配额 查看目录的配额信息 put 文件进行名称配额测试 清除配额限制 再次 put 一个文件  创建一个测试目录1hdfs dfs -mkdir &#x2F;shitao&#x2F;test_quota1">
<meta property="og:type" content="article">
<meta property="og:title" content="HDFS 配额教程">
<meta property="og:url" content="https://sitoi.cn/posts/12544.html">
<meta property="og:site_name" content="Sitoi">
<meta property="og:description" content="名称配额（Name Quota）名称配额是在对应的目录下所有文件和目录名称的数量上的限制。当超过这个配额的时候，文件或目录就会创建失败，重命名后名称配额仍然有效。 名称配额步骤 创建一个测试目录 设置创建的目录的名称配额 查看目录的配额信息 put 文件进行名称配额测试 清除配额限制 再次 put 一个文件  创建一个测试目录1hdfs dfs -mkdir &#x2F;shitao&#x2F;test_quota1">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://vectorcraftr.com/library/programmer/a_programmer_listening_to_music.svg">
<meta property="article:published_time" content="2019-01-08T13:36:00.000Z">
<meta property="article:modified_time" content="2025-03-04T01:39:57.811Z">
<meta property="article:author" content="Sitoi">
<meta property="article:tag" content="Hadoop">
<meta property="article:tag" content="HDFS">
<meta property="article:tag" content="配额">
<meta property="article:tag" content="分布式">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://vectorcraftr.com/library/programmer/a_programmer_listening_to_music.svg"><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "HDFS 配额教程",
  "url": "https://sitoi.cn/posts/12544.html",
  "image": "https://vectorcraftr.com/library/programmer/a_programmer_listening_to_music.svg",
  "datePublished": "2019-01-08T13:36:00.000Z",
  "dateModified": "2025-03-04T01:39:57.811Z",
  "author": [
    {
      "@type": "Person",
      "name": "Sitoi",
      "url": "https://sitoi.cn/"
    }
  ]
}</script><link rel="shortcut icon" href="https://cdn.jsdelivr.net/gh/Sitoi/Sitoi.github.io/favicon.ico"><link rel="canonical" href="https://sitoi.cn/posts/12544.html"><link rel="preconnect" href="https://npm.elemecdn.com"/><link rel="preconnect" href="//www.google-analytics.com" crossorigin=""/><link rel="preconnect" href="//hm.baidu.com"/><link rel="preconnect" href="//static.cloudflareinsights.com"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="manifest" href="/manifest.json"/><meta name="msapplication-TileColor" content="#fff"/><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"/><link rel="icon" type="image/png" sizes="32x32" href="/medias/logo_32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/medias/logo_16.png"/><link rel="mask-icon" href="/apple-touch-icon.png" color="#5bbad5"/><link rel="stylesheet" href="/css/index.css?v=5.3.4"><link rel="stylesheet" href="https://npm.elemecdn.com/@fortawesome/fontawesome-free@latest/css/all.min.css"><link rel="stylesheet" href="https://npm.elemecdn.com/node-snackbar@latest/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/@fancyapps/ui@latest/dist/fancybox/fancybox.css" media="print" onload="this.media='all'"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!false && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', 'undefined')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', 'undefined')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          theme === 'dark' ? activateDarkMode() : theme === 'light' ? activateLightMode() : null
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?c29e2dcbe60cb0ec619a76c424a71b11";
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(hm, s);
})();
btf.addGlobalFn('pjaxComplete', () => {
  _hmt.push(['_trackPageview',window.location.pathname])
}, 'baidu_analytics')
</script><script async="async" src="https://www.googletagmanager.com/gtag/js?id=UA-136865061-1"></script><script>window.dataLayer = window.dataLayer || []
function gtag(){dataLayer.push(arguments)}
gtag('js', new Date())
gtag('config', 'UA-136865061-1')
btf.addGlobalFn('pjaxComplete', () => {
  gtag('config', 'UA-136865061-1', {'page_path': window.location.pathname})
}, 'google_analytics')
</script><script defer="defer" data-pjax="data-pjax" src="https://static.cloudflareinsights.com/beacon.min.js" data-cf-beacon="{&quot;token&quot;: &quot;b618d0d8bcf448af935bd89530ccffcd&quot;}"></script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"top_n_per_article":1,"unescape":false,"languages":{"hits_empty":"未找到符合您查询的内容：${query}","hits_stats":"共找到 ${hits} 篇文章"}},
  translate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false,"highlightFullpage":false,"highlightMacStyle":true},
  copy: {
    success: '复制成功',
    error: '复制失败',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"已切换为繁体中文","cht_to_chs":"已切换为简体中文","day_to_night":"已切换为深色模式","night_to_day":"已切换为浅色模式","bgLight":"#49b1f5","bgDark":"#2d3035","position":"bottom-left"},
  infinitegrid: {
    js: 'https://npm.elemecdn.com/@egjs/infinitegrid@latest/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyloadPlugin: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: true,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'HDFS 配额教程',
  isHighlightShrink: false,
  isToc: true,
  pageType: 'post'
}</script><script async src="https://umami.sitoi.cn/script.js" data-website-id="b23bdc64-5e23-46d5-9e2c-c862f9413a1f"></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Sitoi/Sitoi.github.io/background.css"><meta name="baidu_union_verify" content="8822ba856d99c65163dd207aaffc3510"><style type="text/css">.app-refresh{position:fixed;top:-2.2rem;left:0;right:0;z-index:99999;padding:0 1rem;font-size:15px;height:2.2rem;transition:all .3s ease}.app-refresh-wrap{display:flex;color:#fff;height:100%;align-items:center;justify-content:center}.app-refresh-wrap a{color:#fff;text-decoration:underline;cursor:pointer}</style><meta name="generator" content="Hexo 7.3.0"><link rel="alternate" href="/atom.xml" title="Sitoi" type="application/atom+xml">
</head><body><div id="web_bg" style="background-color: #efefef;"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src="https://cdn.jsdelivr.net/gh/Sitoi/Sitoi.github.io/medias/avatars/avatar.jpg" onerror="this.onerror=null;this.src='https://cdn.jsdelivr.net/gh/Sitoi/Sitoi.github.io/medias/loading/friend_404.gif'" alt="avatar"/></div><div class="site-data text-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">54</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">95</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">25</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div><div class="menus_item"><a class="site-page" href="/contact/"><i class="fa-fw fas fa-envelope"></i><span> 留言</span></a></div><div class="menus_item"><a class="site-page" href="/friends/"><i class="fa-fw fas fa-link"></i><span> 友人</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-list"></i><span> 项目</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="https://sitoi.github.io/dailycheckin/"><i class="fa-fw fas fa-location-arrow"></i><span> Dailycheckin</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="https://crawlaio.github.io"><i class="fa-fw fas fa-location-arrow"></i><span> 导航</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url(https://vectorcraftr.com/library/programmer/a_programmer_listening_to_music.svg);"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><span class="site-name">Sitoi</span></a><a class="nav-page-title" href="/"><span class="site-name">HDFS 配额教程</span></a></span><div id="menus"><div id="search-button"><span class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></span></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div><div class="menus_item"><a class="site-page" href="/contact/"><i class="fa-fw fas fa-envelope"></i><span> 留言</span></a></div><div class="menus_item"><a class="site-page" href="/friends/"><i class="fa-fw fas fa-link"></i><span> 友人</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-list"></i><span> 项目</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="https://sitoi.github.io/dailycheckin/"><i class="fa-fw fas fa-location-arrow"></i><span> Dailycheckin</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="https://crawlaio.github.io"><i class="fa-fw fas fa-location-arrow"></i><span> 导航</span></a></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">HDFS 配额教程</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2019-01-08T13:36:00.000Z" title="发表于 2019-01-08 21:36:00">2019-01-08</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2025-03-04T01:39:57.811Z" title="更新于 2025-03-04 09:39:57">2025-03-04</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E5%A4%A7%E6%95%B0%E6%8D%AE/">大数据</a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E5%A4%A7%E6%95%B0%E6%8D%AE/Hadoop/">Hadoop</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">总字数:</span><span class="word-count">1.1k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>4分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">浏览量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="container post-content" id="article-container"><h1 id="名称配额（Name-Quota）"><a href="#名称配额（Name-Quota）" class="headerlink" title="名称配额（Name Quota）"></a>名称配额（Name Quota）</h1><p>名称配额是在对应的目录下所有文件和目录名称的数量上的限制。<br>当超过这个配额的时候，文件或目录就会创建失败，<strong>重命名后</strong>名称配额<strong>仍然有效</strong>。</p>
<h3 id="名称配额步骤"><a href="#名称配额步骤" class="headerlink" title="名称配额步骤"></a>名称配额步骤</h3><ol>
<li>创建一个测试目录</li>
<li>设置创建的目录的名称配额</li>
<li>查看目录的配额信息</li>
<li>put 文件进行名称配额测试</li>
<li>清除配额限制</li>
<li>再次 put 一个文件</li>
</ol>
<h4 id="创建一个测试目录"><a href="#创建一个测试目录" class="headerlink" title="创建一个测试目录"></a>创建一个测试目录</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hdfs dfs -<span class="built_in">mkdir</span> /shitao/test_quota1</span><br></pre></td></tr></table></figure>

<h4 id="设置创建的目录的名称配额"><a href="#设置创建的目录的名称配额" class="headerlink" title="设置创建的目录的名称配额"></a>设置创建的目录的名称配额</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hdfs dfsadmin -setQuota 2 /shitao/test_quota1</span><br></pre></td></tr></table></figure>

<h4 id="查看目录的配额信息"><a href="#查看目录的配额信息" class="headerlink" title="查看目录的配额信息"></a>查看目录的配额信息</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hdfs dfs -count -q /shitao/test_quota1</span><br></pre></td></tr></table></figure>

<blockquote>
<p>状态信息</p>
</blockquote>
<table>
<thead>
<tr>
<th align="center">状态</th>
<th align="center">文件数限额</th>
<th align="center">可用文件数</th>
<th align="center">空间限额大小（字节）</th>
<th align="center">可用空间大小（字节）</th>
<th align="center">目录数</th>
<th align="center">文件数</th>
<th align="center">总大小</th>
<th align="center">文件&#x2F;目录名</th>
</tr>
</thead>
<tbody><tr>
<td align="center">设置前</td>
<td align="center">none</td>
<td align="center">inf</td>
<td align="center">none</td>
<td align="center">inf</td>
<td align="center">1</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">&#x2F;shitao&#x2F;test_quota</td>
</tr>
<tr>
<td align="center">设置后</td>
<td align="center">2</td>
<td align="center">1</td>
<td align="center">none</td>
<td align="center">inf</td>
<td align="center">1</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">&#x2F;shitao&#x2F;test_quota</td>
</tr>
</tbody></table>
<h4 id="put-文件进行名称配额测试"><a href="#put-文件进行名称配额测试" class="headerlink" title="put 文件进行名称配额测试"></a>put 文件进行名称配额测试</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hdfs dfs -put demo.csv /shitao/test_quota1/</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hdfs dfs -count -q /shitao/test_quota1</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th align="center">状态</th>
<th align="center">文件数限额</th>
<th align="center">可用文件数</th>
<th align="center">空间限额大小（字节）</th>
<th align="center">可用空间大小（字节）</th>
<th align="center">目录数</th>
<th align="center">文件数</th>
<th align="center">总大小</th>
<th align="center">文件&#x2F;目录名</th>
</tr>
</thead>
<tbody><tr>
<td align="center">上传一个文件后</td>
<td align="center">2</td>
<td align="center">0</td>
<td align="center">none</td>
<td align="center">inf</td>
<td align="center">1</td>
<td align="center">1</td>
<td align="center">1469</td>
<td align="center">&#x2F;shitao&#x2F;test_quota</td>
</tr>
</tbody></table>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hdfs dfs -put test.csv /shitao/test_quota1/</span><br></pre></td></tr></table></figure>

<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">put: The NameSpace quota (directories and files) of directory /shitao/test_quota is exceeded: quota=2 file count=3</span><br></pre></td></tr></table></figure>

<blockquote>
<p>注：</p>
<blockquote>
<p>HDFS 在设计的时候，将目录本身也包含了，即占用一个配额数，所以设置为 2 时，其实只能放一个文件或目录。</p>
</blockquote>
</blockquote>
<h4 id="清除配额限制"><a href="#清除配额限制" class="headerlink" title="清除配额限制"></a>清除配额限制</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hdfs dfsadmin -clrQuota /shitao/test_quota1</span><br></pre></td></tr></table></figure>

<h4 id="再次-put-一个文件"><a href="#再次-put-一个文件" class="headerlink" title="再次 put 一个文件"></a>再次 put 一个文件</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hdfs dfs -put test.csv /shitao/test_quota1/</span><br></pre></td></tr></table></figure>

<blockquote>
<p>可以看到 put 成功了，再次查看配额信息：</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hdfs dfs -count -q /shitao/test_quota1</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th align="center">状态</th>
<th align="center">文件数限额</th>
<th align="center">可用文件数</th>
<th align="center">空间限额大小（字节）</th>
<th align="center">可用空间大小（字节）</th>
<th align="center">目录数</th>
<th align="center">文件数</th>
<th align="center">总大小</th>
<th align="center">文件&#x2F;目录名</th>
</tr>
</thead>
<tbody><tr>
<td align="center">清除配额限制后</td>
<td align="center">none</td>
<td align="center">inf</td>
<td align="center">none</td>
<td align="center">inf</td>
<td align="center">1</td>
<td align="center">2</td>
<td align="center">2575</td>
<td align="center">&#x2F;shitao&#x2F;test_quota</td>
</tr>
</tbody></table>
<blockquote>
<p>注：</p>
<blockquote>
<p>如果前面两个值为 none 和 inf 时，表示没有设置名称配额。</p>
</blockquote>
</blockquote>
<hr>
<h1 id="空间配额（Space-Quota）"><a href="#空间配额（Space-Quota）" class="headerlink" title="空间配额（Space Quota）"></a>空间配额（Space Quota）</h1><p>空间配额是目录的空间大小限制。<br>如果超过这个配额，块写入操作会失败。副本也算配额中的一部分。<br>空间配额为 0 的时候，可以创建文件，但是不能向文件中写入内容。</p>
<h3 id="空间配额步骤"><a href="#空间配额步骤" class="headerlink" title="空间配额步骤"></a>空间配额步骤</h3><ol>
<li>创建一个测试目录</li>
<li>生成测试 100MB 大小的文件</li>
<li>设置空间配额大小为 200MB</li>
<li>put 文件测试</li>
<li>修改空间配额大小为 385MB</li>
<li>put 一个文件</li>
<li>清除配额限制</li>
<li>再次 put 一个文件</li>
</ol>
<h4 id="创建测试目录"><a href="#创建测试目录" class="headerlink" title="创建测试目录"></a>创建测试目录</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hdfs dfs -<span class="built_in">mkdir</span> /shitao/test_quota2</span><br></pre></td></tr></table></figure>

<h4 id="生成测试-100MB-大小的文件"><a href="#生成测试-100MB-大小的文件" class="headerlink" title="生成测试 100MB 大小的文件"></a>生成测试 100MB 大小的文件</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">dd</span> <span class="keyword">if</span>=/dev/zero of=./file bs=1M count=100</span><br></pre></td></tr></table></figure>

<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">100+0 records in</span><br><span class="line">100+0 records out</span><br><span class="line">104857600 bytes (105 MB) copied, 0.0813538 s, 1.3 GB/s</span><br></pre></td></tr></table></figure>

<blockquote>
<p>查看文件大小</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">du</span> -sh</span><br></pre></td></tr></table></figure>

<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">100M	.</span><br></pre></td></tr></table></figure>

<h4 id="设置空间配额大小为-200MB"><a href="#设置空间配额大小为-200MB" class="headerlink" title="设置空间配额大小为 200MB"></a>设置空间配额大小为 200MB</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hdfs dfsadmin -setSpaceQuota 209715200 /shitao/test_quota2</span><br></pre></td></tr></table></figure>

<h4 id="上传文件测试"><a href="#上传文件测试" class="headerlink" title="上传文件测试"></a>上传文件测试</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hdfs dfs -put file /shitao/test_quota2/</span><br></pre></td></tr></table></figure>

<blockquote>
<p>返回信息：</p>
</blockquote>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">put: The DiskSpace quota of /shitao/test_quota2 is exceeded: quota = 209715200 B = 200 MB but diskspace consumed = 402653184 B = 384 MB</span><br></pre></td></tr></table></figure>

<blockquote>
<p>注：</p>
<blockquote>
<p>其实这个跟 HDFS 的块大小有关系。</p>
</blockquote>
</blockquote>
<blockquote>
<blockquote>
<p>我们环境的 HDFS 的 blocksize(dfs.block.size, dfs.blocksize)大小设置为 128MB，副本因子为 3。</p>
</blockquote>
</blockquote>
<blockquote>
<blockquote>
<p>NameNode 写文件时会分配 block 倍数的大小，然后检查对应目录的空间配额。</p>
</blockquote>
</blockquote>
<blockquote>
<blockquote>
<p>当“目录已经写入的容量+ 当前 blocksize*3”与 “目录空间配额” 进行比较，如果前者大于后者，就会报错。</p>
</blockquote>
</blockquote>
<blockquote>
<blockquote>
<p>对于我们上面的测试，即 0+384MB &gt; 200MB，大于空间配额的设置，所以会失败。</p>
</blockquote>
</blockquote>
<h4 id="修改空间配额大小为-385MB"><a href="#修改空间配额大小为-385MB" class="headerlink" title="修改空间配额大小为 385MB"></a>修改空间配额大小为 385MB</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hdfs dfsadmin -setSpaceQuota 403701760 /shitao/test_quota2</span><br></pre></td></tr></table></figure>

<h4 id="put-一个文件"><a href="#put-一个文件" class="headerlink" title="put 一个文件"></a>put 一个文件</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hdfs dfs -put file /shitao/test_quota2/</span><br></pre></td></tr></table></figure>

<blockquote>
<p>当然我们也可以查看空间配额的信息：</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hdfs dfs -count -q /shitao/test_quota2/</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th align="center">状态</th>
<th align="center">文件数限额</th>
<th align="center">可用文件数</th>
<th align="center">空间限额大小（字节）</th>
<th align="center">可用空间大小（字节）</th>
<th align="center">目录数</th>
<th align="center">文件数</th>
<th align="center">总大小</th>
<th align="center">文件&#x2F;目录名</th>
</tr>
</thead>
<tbody><tr>
<td align="center">清除配额限制后</td>
<td align="center">none</td>
<td align="center">inf</td>
<td align="center">403701760</td>
<td align="center">89128960</td>
<td align="center">1</td>
<td align="center">1</td>
<td align="center">104857600</td>
<td align="center">&#x2F;shitao&#x2F;test_quota</td>
</tr>
</tbody></table>
<blockquote>
<p>再次上传，又会出现错误：</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hdfs dfs -put file /shitao/test_quota2/test</span><br></pre></td></tr></table></figure>

<blockquote>
<p>返回信息：</p>
</blockquote>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">put: The DiskSpace quota of /shitao/test_quota2 is exceeded: quota = 403701760 B = 385 MB but diskspace consumed = 717225984 B = 684 MB</span><br></pre></td></tr></table></figure>

<h4 id="清除空间配额"><a href="#清除空间配额" class="headerlink" title="清除空间配额"></a>清除空间配额</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hdfs dfsadmin -clrSpaceQuota /shitao/test_quota2</span><br></pre></td></tr></table></figure>

<h4 id="再次-put-一个文件-1"><a href="#再次-put-一个文件-1" class="headerlink" title="再次 put 一个文件"></a>再次 put 一个文件</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hdfs dfs -put file /shitao/test_quota2/test</span><br></pre></td></tr></table></figure>

<blockquote>
<p>可以看到，清除空间配额后，再次成功上传上面的文件了。</p>
</blockquote>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="https://sitoi.cn">Sitoi</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="https://sitoi.cn/posts/12544.html">https://sitoi.cn/posts/12544.html</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来源 <a href="https://sitoi.cn" target="_blank">Sitoi</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Hadoop/">Hadoop</a><a class="post-meta__tags" href="/tags/HDFS/">HDFS</a><a class="post-meta__tags" href="/tags/%E9%85%8D%E9%A2%9D/">配额</a><a class="post-meta__tags" href="/tags/%E5%88%86%E5%B8%83%E5%BC%8F/">分布式</a></div><div class="post-share"><div class="social-share" data-image="https://vectorcraftr.com/library/programmer/a_programmer_listening_to_music.svg" data-sites="wechat,qq,weibo,twitter,facebook,linkedin"></div><link rel="stylesheet" href="https://npm.elemecdn.com/butterfly-extsrc@latest/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://npm.elemecdn.com/butterfly-extsrc@latest/sharejs/dist/js/social-share.min.js" defer></script></div></div><div class="post-reward"><div class="reward-button"><i class="fas fa-qrcode"></i>赞助</div><div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="https://cdn.jsdelivr.net/gh/Sitoi/Sitoi.github.io/medias/reward/wechat.jpg" target="_blank"><img class="post-qr-code-img" src="https://cdn.jsdelivr.net/gh/Sitoi/Sitoi.github.io/medias/reward/wechat.jpg" alt="微信"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="https://cdn.jsdelivr.net/gh/Sitoi/Sitoi.github.io/medias/reward/alipay.jpg" target="_blank"><img class="post-qr-code-img" src="https://cdn.jsdelivr.net/gh/Sitoi/Sitoi.github.io/medias/reward/alipay.jpg" alt="支付宝"/></a><div class="post-qr-code-desc">支付宝</div></li></ul></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related" href="/posts/24540.html" title="Hadoop 单机安装教程"><img class="cover" src="https://vectorcraftr.com/library/hospital/doctor_consulting.svg" onerror="onerror=null;src='https://cdn.jsdelivr.net/gh/Sitoi/Sitoi.github.io/medias/loading/404.jpg'" alt="cover of previous post"><div class="info"><div class="info-1"><div class="info-item-1">上一篇</div><div class="info-item-2">Hadoop 单机安装教程</div></div><div class="info-2"><div class="info-item-1">Hadoop 单机安装步骤安装环境 Fedora 29 openjdk version “1.8.0_191”  安装步骤 创建 Hadoop 帐号 下载 Hadoop 安装包 解压 Hadoop 安装包 配置环境变量 配置 Hadoop 文件 启动集群 查看状态  创建 Hadoop 帐号为 Hadoop 创建一个专门的账号12sudo adduser hadoopsudo passwd hadoop  授予 Hadoop root 权限 为了测试，图方便，这里给 Hadoop root 权限，生产环境不建议这样做。  使用 root 权限编辑&#x2F;etc&#x2F;sudoers: 1sudo vim /etc/sudoers  末尾添加一行： 1hadoop  ALL=(ALL) ALL  切换到 Hadoop 账号： 1su hadoop  配置 SSH 无密码登录首先生成公私密钥对 1ssh-keygen -t rsa   指定 key pair 的存放位置回车默认存放于&#x2F;home&#x2F;hadoop&#x2F;.ssh&#x2F;id_rsa...</div></div></div></a><a class="pagination-related" href="/posts/62634.html" title="PySpark DataFrame 添加自增 ID"><img class="cover" src="https://vectorcraftr.com/library/sport/a_person_swingin2.svg" onerror="onerror=null;src='https://cdn.jsdelivr.net/gh/Sitoi/Sitoi.github.io/medias/loading/404.jpg'" alt="cover of next post"><div class="info text-right"><div class="info-1"><div class="info-item-1">下一篇</div><div class="info-item-2">PySpark DataFrame 添加自增 ID</div></div><div class="info-2"><div class="info-item-1">PySpark DataFrame 添加自增 ID在用 Spark 处理数据的时候，经常需要给全量数据增加一列自增 ID 序号，在存入数据库的时候，自增 ID 也常常是一个很关键的要素。在 DataFrame 的 API 中没有实现这一功能，所以只能通过其他方式实现，或者转成 RDD 再用 RDD 的 zipWithIndex 算子实现。下面呢就介绍三种实现方式。  创建 DataFrame 对象  123456789101112131415from pyspark.sql import SparkSessionspark = SparkSession.builder.getOrCreate()df = spark.createDataFrame(    [        &#123;&quot;name&quot;: &quot;Alice&quot;, &quot;age&quot;: 18&#125;,        &#123;&quot;name&quot;: &quot;Sitoi&quot;, &quot;age&quot;: 22&#125;,       ...</div></div></div></a></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><a class="pagination-related" href="/posts/24540.html" title="Hadoop 单机安装教程"><img class="cover" src="https://vectorcraftr.com/library/hospital/doctor_consulting.svg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2019-01-07</div><div class="info-item-2">Hadoop 单机安装教程</div></div><div class="info-2"><div class="info-item-1">Hadoop 单机安装步骤安装环境 Fedora 29 openjdk version “1.8.0_191”  安装步骤 创建 Hadoop 帐号 下载 Hadoop 安装包 解压 Hadoop 安装包 配置环境变量 配置 Hadoop 文件 启动集群 查看状态  创建 Hadoop 帐号为 Hadoop 创建一个专门的账号12sudo adduser hadoopsudo passwd hadoop  授予 Hadoop root 权限 为了测试，图方便，这里给 Hadoop root 权限，生产环境不建议这样做。  使用 root 权限编辑&#x2F;etc&#x2F;sudoers: 1sudo vim /etc/sudoers  末尾添加一行： 1hadoop  ALL=(ALL) ALL  切换到 Hadoop 账号： 1su hadoop  配置 SSH 无密码登录首先生成公私密钥对 1ssh-keygen -t rsa   指定 key pair 的存放位置回车默认存放于&#x2F;home&#x2F;hadoop&#x2F;.ssh&#x2F;id_rsa...</div></div></div></a></div></div><hr class="custom-hr"/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div id="waline-wrap"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="https://cdn.jsdelivr.net/gh/Sitoi/Sitoi.github.io/medias/avatars/avatar.jpg" onerror="this.onerror=null;this.src='https://cdn.jsdelivr.net/gh/Sitoi/Sitoi.github.io/medias/loading/friend_404.gif'" alt="avatar"/></div><div class="author-info-name">Sitoi</div><div class="author-info-description">真正的酷都是需要付诸努力的</div><div class="site-data"><a href="/archives/"><div class="headline">文章</div><div class="length-num">54</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">95</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">25</div></a></div><a id="card-info-btn" href="https://github.com/Sitoi"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons"><a class="social-icon" href="/wechat.jpg" target="_blank" title="Wechat"><i class="fab fa-weixin"></i></a><a class="social-icon" href="tencent://message/?uin=133397418" target="_blank" title="QQ"><i class="fab fa-qq"></i></a><a class="social-icon" href="https://mail.qq.com/cgi-bin/qm_share?t=qm_mailme&amp;email=133397418" target="_blank" title="Email"><i class="fas fa-envelope"></i></a><a class="social-icon" href="https://github.com/Sitoi/" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="/atom.xml" target="_blank" title="RSS"><i class="fas fa-rss"></i></a></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%90%8D%E7%A7%B0%E9%85%8D%E9%A2%9D%EF%BC%88Name-Quota%EF%BC%89"><span class="toc-number">1.</span> <span class="toc-text">名称配额（Name Quota）</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%90%8D%E7%A7%B0%E9%85%8D%E9%A2%9D%E6%AD%A5%E9%AA%A4"><span class="toc-number">1.0.1.</span> <span class="toc-text">名称配额步骤</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA%E6%B5%8B%E8%AF%95%E7%9B%AE%E5%BD%95"><span class="toc-number">1.0.1.1.</span> <span class="toc-text">创建一个测试目录</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%AE%BE%E7%BD%AE%E5%88%9B%E5%BB%BA%E7%9A%84%E7%9B%AE%E5%BD%95%E7%9A%84%E5%90%8D%E7%A7%B0%E9%85%8D%E9%A2%9D"><span class="toc-number">1.0.1.2.</span> <span class="toc-text">设置创建的目录的名称配额</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9F%A5%E7%9C%8B%E7%9B%AE%E5%BD%95%E7%9A%84%E9%85%8D%E9%A2%9D%E4%BF%A1%E6%81%AF"><span class="toc-number">1.0.1.3.</span> <span class="toc-text">查看目录的配额信息</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#put-%E6%96%87%E4%BB%B6%E8%BF%9B%E8%A1%8C%E5%90%8D%E7%A7%B0%E9%85%8D%E9%A2%9D%E6%B5%8B%E8%AF%95"><span class="toc-number">1.0.1.4.</span> <span class="toc-text">put 文件进行名称配额测试</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B8%85%E9%99%A4%E9%85%8D%E9%A2%9D%E9%99%90%E5%88%B6"><span class="toc-number">1.0.1.5.</span> <span class="toc-text">清除配额限制</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%86%8D%E6%AC%A1-put-%E4%B8%80%E4%B8%AA%E6%96%87%E4%BB%B6"><span class="toc-number">1.0.1.6.</span> <span class="toc-text">再次 put 一个文件</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%A9%BA%E9%97%B4%E9%85%8D%E9%A2%9D%EF%BC%88Space-Quota%EF%BC%89"><span class="toc-number">2.</span> <span class="toc-text">空间配额（Space Quota）</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%A9%BA%E9%97%B4%E9%85%8D%E9%A2%9D%E6%AD%A5%E9%AA%A4"><span class="toc-number">2.0.1.</span> <span class="toc-text">空间配额步骤</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E6%B5%8B%E8%AF%95%E7%9B%AE%E5%BD%95"><span class="toc-number">2.0.1.1.</span> <span class="toc-text">创建测试目录</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%94%9F%E6%88%90%E6%B5%8B%E8%AF%95-100MB-%E5%A4%A7%E5%B0%8F%E7%9A%84%E6%96%87%E4%BB%B6"><span class="toc-number">2.0.1.2.</span> <span class="toc-text">生成测试 100MB 大小的文件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%AE%BE%E7%BD%AE%E7%A9%BA%E9%97%B4%E9%85%8D%E9%A2%9D%E5%A4%A7%E5%B0%8F%E4%B8%BA-200MB"><span class="toc-number">2.0.1.3.</span> <span class="toc-text">设置空间配额大小为 200MB</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%8A%E4%BC%A0%E6%96%87%E4%BB%B6%E6%B5%8B%E8%AF%95"><span class="toc-number">2.0.1.4.</span> <span class="toc-text">上传文件测试</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9%E7%A9%BA%E9%97%B4%E9%85%8D%E9%A2%9D%E5%A4%A7%E5%B0%8F%E4%B8%BA-385MB"><span class="toc-number">2.0.1.5.</span> <span class="toc-text">修改空间配额大小为 385MB</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#put-%E4%B8%80%E4%B8%AA%E6%96%87%E4%BB%B6"><span class="toc-number">2.0.1.6.</span> <span class="toc-text">put 一个文件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B8%85%E9%99%A4%E7%A9%BA%E9%97%B4%E9%85%8D%E9%A2%9D"><span class="toc-number">2.0.1.7.</span> <span class="toc-text">清除空间配额</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%86%8D%E6%AC%A1-put-%E4%B8%80%E4%B8%AA%E6%96%87%E4%BB%B6-1"><span class="toc-number">2.0.1.8.</span> <span class="toc-text">再次 put 一个文件</span></a></li></ol></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/posts/39218.html" title="如何在 Elasticsearch 中更新索引的 Mapping"><img src="https://vectorcraftr.com/library/school/Science_teacher_conducting.svg" onerror="this.onerror=null;this.src='https://cdn.jsdelivr.net/gh/Sitoi/Sitoi.github.io/medias/loading/404.jpg'" alt="如何在 Elasticsearch 中更新索引的 Mapping"/></a><div class="content"><a class="title" href="/posts/39218.html" title="如何在 Elasticsearch 中更新索引的 Mapping">如何在 Elasticsearch 中更新索引的 Mapping</a><time datetime="2023-10-14T06:26:21.000Z" title="发表于 2023-10-14 14:26:21">2023-10-14</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/10054.html" title="简洁登录：在 Linux 终端中去除 'Last login' 信息"><img src="https://vectorcraftr.com/library/doodles/extend/a_business_woman.svg" onerror="this.onerror=null;this.src='https://cdn.jsdelivr.net/gh/Sitoi/Sitoi.github.io/medias/loading/404.jpg'" alt="简洁登录：在 Linux 终端中去除 'Last login' 信息"/></a><div class="content"><a class="title" href="/posts/10054.html" title="简洁登录：在 Linux 终端中去除 'Last login' 信息">简洁登录：在 Linux 终端中去除 'Last login' 信息</a><time datetime="2023-07-28T02:25:20.000Z" title="发表于 2023-07-28 10:25:20">2023-07-28</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/46937.html" title="高效下载 NGINX 静态网站：利用 wget 进行递归下载"><img src="https://vectorcraftr.com/library/green/presenting_a_repor_talk4.svg" onerror="this.onerror=null;this.src='https://cdn.jsdelivr.net/gh/Sitoi/Sitoi.github.io/medias/loading/404.jpg'" alt="高效下载 NGINX 静态网站：利用 wget 进行递归下载"/></a><div class="content"><a class="title" href="/posts/46937.html" title="高效下载 NGINX 静态网站：利用 wget 进行递归下载">高效下载 NGINX 静态网站：利用 wget 进行递归下载</a><time datetime="2023-07-16T01:59:04.000Z" title="发表于 2023-07-16 09:59:04">2023-07-16</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2018 - 2025 By Sitoi</div><div class="framework-info"><span>框架 </span><a href="https://hexo.io">Hexo 7.3.0</a><span class="footer-separator">|</span><span>主题 </span><a href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly 5.3.4</a></div><div class="footer_custom_text"><a href="https://beian.miit.gov.cn/"><img class="icp-icon" src="/medias/icp.png"><span>沪ICP备2025115209号</span></a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="日间和夜间模式切换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="前往评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js?v=5.3.4"></script><script src="/js/main.js?v=5.3.4"></script><script src="https://npm.elemecdn.com/@fancyapps/ui@latest/dist/fancybox/fancybox.umd.js"></script><script src="https://npm.elemecdn.com/instant.page@latest/instantpage.js" type="module"></script><script src="https://npm.elemecdn.com/node-snackbar@latest/dist/snackbar.min.js"></script><div class="js-pjax"><script>(() => {
  const runMermaid = ele => {
    window.loadMermaid = true
    const theme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark' : 'default'

    ele.forEach((item, index) => {
      const mermaidSrc = item.firstElementChild
      const mermaidThemeConfig = `%%{init:{ 'theme':'${theme}'}}%%\n`
      const mermaidID = `mermaid-${index}`
      const mermaidDefinition = mermaidThemeConfig + mermaidSrc.textContent

      const renderFn = mermaid.render(mermaidID, mermaidDefinition)
      const renderMermaid = svg => {
        mermaidSrc.insertAdjacentHTML('afterend', svg)
      }

      // mermaid v9 and v10 compatibility
      typeof renderFn === 'string' ? renderMermaid(renderFn) : renderFn.then(({ svg }) => renderMermaid(svg))
    })
  }

  const codeToMermaid = () => {
    const codeMermaidEle = document.querySelectorAll('pre > code.mermaid')
    if (codeMermaidEle.length === 0) return

    codeMermaidEle.forEach(ele => {
      const preEle = document.createElement('pre')
      preEle.className = 'mermaid-src'
      preEle.hidden = true
      preEle.textContent = ele.textContent
      const newEle = document.createElement('div')
      newEle.className = 'mermaid-wrap'
      newEle.appendChild(preEle)
      ele.parentNode.replaceWith(newEle)
    })
  }

  const loadMermaid = () => {
    if (false) codeToMermaid()
    const $mermaid = document.querySelectorAll('#article-container .mermaid-wrap')
    if ($mermaid.length === 0) return

    const runMermaidFn = () => runMermaid($mermaid)
    btf.addGlobalFn('themeChange', runMermaidFn, 'mermaid')
    window.loadMermaid ? runMermaidFn() : btf.getScript('https://npm.elemecdn.com/mermaid@latest/dist/mermaid.min.js').then(runMermaidFn)
  }

  btf.addGlobalFn('encrypt', loadMermaid, 'mermaid')
  window.pjax ? loadMermaid() : document.addEventListener('DOMContentLoaded', loadMermaid)
})()</script><script>(() => {
  let initFn = window.walineFn || null
  const isShuoshuo = GLOBAL_CONFIG_SITE.pageType === 'shuoshuo'
  const option = null

  const destroyWaline = ele => ele.destroy()

  const initWaline = (Fn, el = document, path = window.location.pathname) => {
    const waline = Fn({
      el: el.querySelector('#waline-wrap'),
      serverURL: 'https://waline.sitoi.cn/',
      pageview: false,
      dark: 'html[data-theme="dark"]',
      comment: false,
      ...option,
      path: isShuoshuo ? path : (option && option.path) || path
    })

    if (isShuoshuo) {
      window.shuoshuoComment.destroyWaline = () => {
        destroyWaline(waline)
        if (el.children.length) {
          el.innerHTML = ''
          el.classList.add('no-comment')
        }
      }
    }
  }

  const loadWaline = (el, path) => {
    if (initFn) initWaline(initFn, el, path)
    else {
      btf.getCSS('https://npm.elemecdn.com/@waline/client@latest/dist/waline.css')
        .then(() => import('https://npm.elemecdn.com/@waline/client@latest/dist/waline.js'))
        .then(({ init }) => {
          initFn = init || Waline.init
          initWaline(initFn, el, path)
          window.walineFn = initFn
        })
    }
  }

  if (isShuoshuo) {
    'Waline' === 'Waline'
      ? window.shuoshuoComment = { loadComment: loadWaline } 
      : window.loadOtherComment = loadWaline
    return
  }

  if ('Waline' === 'Waline' || !false) {
    if (false) btf.loadComment(document.getElementById('waline-wrap'),loadWaline)
    else setTimeout(loadWaline, 0)
  } else {
    window.loadOtherComment = loadWaline
  }
})()</script></div><div class="app-refresh" id="app-refresh"> <div class="app-refresh-wrap"> <label>✨ 网站已更新最新版本 👉</label> <a href="javascript:void(0)" onclick="location.reload()">点击刷新</a> </div></div><script>function showNotification(){if(GLOBAL_CONFIG.Snackbar){var t="light"===document.documentElement.getAttribute("data-theme")?GLOBAL_CONFIG.Snackbar.bgLight:GLOBAL_CONFIG.Snackbar.bgDark,e=GLOBAL_CONFIG.Snackbar.position;Snackbar.show({text:"已更新最新版本",backgroundColor:t,duration:5e5,pos:e,actionText:"点击刷新",actionTextColor:"#fff",onActionClick:function(t){location.reload()}})}else{var o=`top: 0; background: ${"light"===document.documentElement.getAttribute("data-theme")?"#49b1f5":"#1f1f1f"};`;document.getElementById("app-refresh").style.cssText=o}}"serviceWorker"in navigator&&(navigator.serviceWorker.controller&&navigator.serviceWorker.addEventListener("controllerchange",function(){showNotification()}),window.addEventListener("load",function(){navigator.serviceWorker.register("/sw.js")}));</script><script id="click-heart" src="https://npm.elemecdn.com/butterfly-extsrc@latest/dist/click-heart.min.js" async="async" mobile="false"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="text-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js?v=5.3.4"></script></div></div></body></html>